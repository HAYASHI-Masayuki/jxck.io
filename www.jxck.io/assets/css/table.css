/** table の align */
.align-left {
  text-align: left;
}

.align-right {
  text-align: right;
}

.align-center {
  text-align: center;
}

article {
  counter-reset: table;
}

figure {
  margin: 0;
  padding: 0;
  overflow-x: auto;
  font-family: var(--mono-font);
}

figcaption {
  margin-inline-start: 0.5em;
  margin-block-end: 0.5em;
  font-style: italic;
}
figcaption::before {
  counter-increment: table;
  content: "[表:" counter(table) " "
}
figcaption::after {
  content: "]"
}

table {
  margin: 0 auto;
  text-align: left;
  white-space: nowrap;
  border-collapse: collapse;
  border-spacing: 0;
}

/** 左右の罫線 */
th::before,
td::before {
  content: "|";
  content: "|" / "";
  font-weight: normal;
  margin-inline-end: var(--table-padding);
  float: left;
}

th,
td {
  padding-inline-end: var(--table-padding);
  clear: left;
}


/* Mobile では wrap させて余白調整 */
@media screen and (max-device-width: 960px) {
  table {
    overflow-x: scroll;
    white-space: nowrap;
  }

  th, td {
    padding-inline-end: calc(var(--table-padding) * 2);
  }
}

tr::after {
  content: "|";
  content: "|" / "";
  font-weight: normal;
}

/** tbody の最初の行だけ左右の罫線を 2 本にする */
th::before,
thead tr:last-child::after {
  content: "|\A|";
  content: "|\A|" / "";
  white-space: pre;
}

/** thead と tbody の間の仕切り */
th {
  position: relative;
}

/** 中央は : をつけない */
/** TODO: 線が途切れるのと :--: は text-verflow が string に対応したらできそう(firefox のみ) */
th::after {
  content: "------------------------------------------------------------------";
  content: "------------------------------------------------------------------" / "";
  white-space: nowrap;
  overflow: hidden;
  text-overflow: clip;
  position: absolute;
  letter-spacing: 0.1em;
  font-weight: normal;
  top: 100%;
  transform: translateY(-100%);
  left: calc(var(--table-separator-width) + var(--table-padding));
  right: var(--table-separator-width);
}

/** 左は : を頭に */
th.align-left::after {
  content: ":-----------------------------------------------------------------";
  content: ":-----------------------------------------------------------------" / "";
}

/** 右は RTL で */
th.align-right::after {
  content: ":-----------------------------------------------------------------";
  content: ":-----------------------------------------------------------------" / "";
  direction: rtl;
}
