<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">

<title>Input Type DEMO | labs.jxck.io</title>

<h1>Input Type DEMO</h1>

<style>
:root {
  --thumb-color:  royalblue;
  --thumb-size:   10px;
  --thumb-radius: 50%;
  --bar-color:    #ccc;
  --bar-size:     4px;
  --bar-radius:   2px;
}
  #slider {
    width: 80vw;
    background-color: pink;
    position: relative;
    height: 40px;
  }
  #bar {
    position: absolute;
    top:      2px;
    left:     0;
    width:    0%;
    height:   var(--bar-size);
    background: var(--thumb-color);
    border-top-left-radius: var(--bar-radius);
    border-bottom-left-radius: var(--bar-radius);
  }


  input[type=range] {
    position: absolute;
    top: 0;
    left: 0;
    -webkit-appearance:none;
    width:         100%;
    background:    var(--bar-color);
    height:        var(--bar-size);
    border-radius: var(--bar-radius);
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance:none;
    border:        none;
    background:    var(--thumb-color);
    height:        var(--thumb-size);
    width:         var(--thumb-size);
    border-radius: var(--thumb-radius);
  }

  input[type=range]::-moz-range-thumb {
    border:        none;
    background:    var(--thumb-color);
    height:        var(--thumb-size);
    width:         var(--thumb-size);
    border-radius: var(--thumb-radius);
  }
  input[type=range]::-moz-range-track {
    height: var(--bar-size);
  }

  input[type=range]::-ms-tooltip{
    display: none;
  }
</style>


<form id=form>
  <div id=slider>
    <input id=range name=range type=range min=0 max=256 value=0 step=0.1>
    <div id=bar></div>
  </div>
  <button type=submit>submit</button>
</form>

<script>
const $  = document.querySelector.bind(document)
const $$ = document.querySelectorAll.bind(document)
EventTarget.prototype.on = EventTarget.prototype.addEventListener

const $range = $('#range')
const $bar = $('#bar')
$range.on('input', (e) => {
  console.log(e.target.value)
  const value = parseFloat(e.target.value)
  const max   = parseFloat(e.target.max)
  const curr  = (value/max)*100
  $bar.style.width = `${curr}%`
})

</script>


<script>
  document.querySelector('#form').addEventListener('submit', (e) => {
    e.preventDefault();

    let formdata = new FormData(e.target)
    let dataset = Array.from(formdata.entries()).reduce((o, [k, v]) => {
      console.log(k, ":", v)

      if (k === "file") {
        v = {
          lastModified    : v.lastModified,
          lastModifiedDate: v.lastModifiedDate,
          name            : v.name,
          size            : v.size,
          type            : v.type,
        }
      }

      if (k === "select") {
        if (o[k] === undefined) o[k] = []

        o[k].push(v)
        return o
      }

      o[k] = v
      return o
    }, {})
    console.log(JSON.stringify(dataset, "   ", "   "))
  });
</script>
