<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Show Modal Dialog DEMO | labs.jxck.io</title>

<h1>Show Modal Dialog DEMO</h1>

<style>
  dialog {
    padding: 0;
    div {
      padding: 1rem;
      background-color: cyan;
    }
  }
</style>
<dialog>
  <div>
    <h1>Hello Dialog</h1>
    <form method="dialog">
      <button autofocus type="submit" value="confirm">Confirm</button>
      <button type="cancel" value="cancel">Cancel</button>
    </form>
  </div>
</dialog>

<button id=show>dialog.show()</button>
<button id=showModal>dialog.showModal()</button>
<script>
  const $ = document.querySelector.bind(document)
  const $$ = document.querySelectorAll.bind(document)
  EventTarget.prototype.on = EventTarget.prototype.addEventListener

  $('#show').on('click', (e) => {
    $('dialog').show()
  })

  $('#showModal').on('click', (e) => {
    $('dialog').showModal()
  })

  $('dialog').on('close', (e) => {
    console.log(e.type)
    console.log(e.target.returnValue)
  })
  $('dialog').on('cancel', (e) => {
    console.log(e.type)
    console.log(e.target.returnValue)
  })
  $('dialog').on('click', (e) => {
    // dialog 背景含めて全体がフック対象
    const {target, currentTarget} = e
    console.log({target, currentTarget})
    if (e.target === e.currentTarget) {
       // 両方 dialog 自身なのは backdrop のみになる
      $('dialog').close()
    }
  })
</script>