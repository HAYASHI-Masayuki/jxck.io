<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">

<title>SVG DEMO | labs.jxck.io</title>
<!--
  <meta http-equiv=refresh content=1>
-->

<style>
img {
  width: 200px;
  height: 200px;
  border: solid 1px #000;
  background: #000;
  fill: white;
}
svg {
  width: 200px;
  height: 200px;
  background-color: black;
  display: block;
  fill: yellow;
}
pre {
  background: #ccc;
}
</style>

<template>
  <div>
    <h2 id></h2>
    <details>
      <summary><img src></img></summary>
      <pre id></pre>
    </details>
  </div>
</template>

<script>
  const $  = document.querySelector.bind(document)
  const $$ = document.querySelectorAll.bind(document)
  window.addEventListener('DOMContentLoaded', () => {
    "use strict";

    const map = new Map([
      ["cacoo",             "cacoo.svg"],
      ["cacoo - svggo",     "svggo.svg"],
      ["jxck",              "jxck.svg"],
      ["mozaic",            "mozaic.svg"],

      ["Close",             "close.svg"],
      ["Install",           "install.svg"],
      ["Humans.txt",        "humans.svg"],

      ["Play",              "play.svg"],
      ["Pause",             "pause.svg"],
      ["Back",              "back.svg"],
      ["Forward",           "forward.svg"],
      ["Volume Down",       "volume-down.svg"],
      ["Volume Up",         "volume-up.svg"],

      ["Search",            "search.svg"],
      ["Share",             "share.svg"],
      ["UP",                "up.svg"],
      ["Addto Home Screen", "a2hs.svg"],

      ["RSS",               "rss.svg"],
      ["Podcast",           "podcast.svg"],
      ["iTunes",            "itunes.svg"],
      ["Spotify",           "spotify.svg"],
      ["Google Podcast",    "google-podcast.svg"],
      ["Twitter",           "twitter.svg"],
      ["Github",            "github.svg"],

      ["Blog",              "blog.svg"],
      ["Labs",              "labs.svg"],
      ["Slide",             "slide.svg"],

      ["LGTM",              "lgtm.svg"],
      ["404",               "404.svg"],
      ["500",               "500.svg"],
      ["503",               "503.svg"],
    ])

    const $footer = $("footer")
    const template = $('template')

    map.forEach((v, k) => {
      const id = v
      const src = v
      const name = k.replace('.svg', '')
      const clone = document.importNode(template.content, true);
      clone.querySelector('h2').id = name
      clone.querySelector('h2').textContent = name
      clone.querySelector('img').src = src
      clone.querySelector('pre').id = id
      $footer.parentNode.insertBefore(clone, $footer)
    })

    let imgs = document.getElementsByTagName('img');
    let svgs = document.querySelectorAll('svg use');

    let img_url = Array.from(imgs).map(img => img.src);
    let svg_url = Array.from(svgs).map(svg => svg.href.baseVal.replace(/#.*/, ''));

    let urls = [...img_url, ...svg_url];
    console.log(urls);

    urls.forEach((url) => {
      fetch(url).then((res) => res.text()).then((txt) => {
        let id = url.split('/').pop();
        console.log(id);
        txt = '// ' + txt.length + 'byte\n' + txt;
        document.getElementById(id).textContent = txt;
      });
    });
  });
</script>

<h1>SVG Gallery</h1>

<div>
  <h2 id=push>Push</h2>
  <details>
    <summary><svg><use xlink:href="push.svg#main"/></svg></summary>
    <pre id=push.svg></pre>
  </details>
</div>

<div>
  <h2 id=amp>AMP</h2>
  <details>
    <summary><svg><use xlink:href="amp.svg#main"/></svg></summary>
    <pre id=amp.svg></pre>
  </details>
</div>

<footer>
  <address class=copyright>Copyright &copy; 2013 <a href=https://jxck.io>Jxck</a>. All Rights Reserved.</address>
</footer>
