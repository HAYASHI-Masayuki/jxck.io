<!DOCTYPE html>
<html amp lang=ja>
<head>
  <meta charset=utf-8>
  <meta name=viewport content="width=device-width,initial-scale=1">

  <link rel=author    href=https://jxck.io/humans.txt>
  <link rel=manifest  href=/manifest.webmanifest>
  <link rel=alternate href=/feeds/atom.xml type=application/atom+xml title=blog.jxck.io>

  <link rel=canonical href=https://blog.jxck.io/entries/2016-01-27/new-blog-start.html>

  <link rel=icon             type =image/svg+xml sizes=any href=https://jxck.io/assets/img/jxck.svg>
  <link rel=icon             type =image/png sizes=256x256 href=https://jxck.io/assets/img/jxck.png>
  <link rel=apple-touch-icon type =image/png sizes=256x256 href=https://jxck.io/assets/img/jxck.png>

  <meta name=author              content=Jxck>
  <meta name=description         content="長いこと はてな をメインにし、他にも Qiita や Tumblr を使って色々書いて来たが、そろそろ自分のドメインに全部集約していこうかと思う。">
  <meta name=keywords            content="web,blog">
  <meta name=theme-color         content=#000000>

  <meta name=twitter:card        content=summary>
  <meta name=twitter:site        content=@jxck_>
  <meta name=twitter:url         content=https://blog.jxck.io/entries/2016-01-27/new-blog-start.html>
  <meta name=twitter:title       content="Blog を移転しました | blog.jxck.io">
  <meta name=twitter:description content="長いこと はてな をメインにし、他にも Qiita や Tumblr を使って色々書いて来たが、そろそろ自分のドメインに全部集約していこうかと思う。">
  <meta name=twitter:image       content=https://jxck.io/assets/img/jxck.png>

  <meta property=og:type         content=article>
  <meta property=og:url          content=https://blog.jxck.io/entries/2016-01-27/new-blog-start.html>
  <meta property=og:title        content="Blog を移転しました | blog.jxck.io">
  <meta property=og:site_name    content=blog.jxck.io>
  <meta property=og:description  content="長いこと はてな をメインにし、他にも Qiita や Tumblr を使って色々書いて来たが、そろそろ自分のドメインに全部集約していこうかと思う。">
  <meta property=og:image        content=https://jxck.io/assets/img/jxck.png>

  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https://blog.jxck.io"
    },
    "headline": "Blog を移転しました | blog.jxck.io",
    "image": [
      "https://jxck.io/assets/img/jxck.png",
      "https://logo.jxck.io/jxck.1200x1200.png"
    ],
    "datePublished": "2016-01-27T08:00:00+08:00",
    "dateModified": "2020-12-18T08:00:00+08:00",
    "author": {
      "@type": "Person",
      "name": "Jxck",
      "image": "https://jxck.io/assets/img/jxck.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Jxck",
      "logo": {
        "@type": "ImageObject",
        "url": "https://logo.jxck.io/jxck.60x60.png",
        "height": 60,
        "width": 60
      }
    },
    "description": "長いこと はてな をメインにし、他にも Qiita や Tumblr を使って色々書いて来たが、そろそろ自分のドメインに全部集約していこうかと思う。"
  }
  </script>

  <title>Blog を移転しました | blog.jxck.io</title>
  <script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script>
  <script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script>
  <script async custom-element=amp-ad src=https://cdn.ampproject.org/v0/amp-ad-0.1.js></script>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src=https://cdn.ampproject.org/v0.js></script>
  <style amp-custom>
    article section p {
      margin-inline-start: 0;
    }

    article table {
      margin-inline-start: 0;
    }

    article img {
      margin: var(--grid) 0;
      border: 1px solid #ccc;
      box-sizing: content-box;
      background-color: #fff;
    }

    article ul,
    article ol,
    article dl {
      margin-inline-start: var(--grid);
      font-family: var(--mono-font);
    }

    article dl {
      display: grid;
      grid-template-columns: minmax(auto, max-content);
      grid-column-gap: var(--grid);
    }

    article dl div {
      display: contents;
    }

    article dl dt {
      grid-column: 1 / 2;
    }
    article dl dd {
      grid-column: 2 / 2;
    }

    article blockquote {
      font-family: var(--mono-font);
    }

    article blockquote p {
      margin: 0;
    }

    @supports (line-height-step: 1px) {
      article {
        --grid-rhythm: 1.5em;
        line-height: 1.5;
        line-height-step: var(--grid-rhythm);
      }

      article h1,
      article h2,
      article h3,
      article h4,
      article h5,
      article h6 {
        display: inline-block;
        width: 100%;
        line-height-step: 0;
        line-height: 1.2;
        margin-block-end: 0;
      }

      article section {
        /* grid for debug */
        /* background-size: 100% var(--grid-rhythm); */
        /* background-image: linear-gradient(to bottom, #00bcd1 1px, transparent 1px); */
      }

      article p {
        margin-block-start: var(--grid-rhythm);
        margin-block-end: var(--grid-rhythm);
      }

      article pre,
      article table {
        line-height-step: 0;
        line-height: normal;
      }
    }
    /* normal regular */
    @font-face {
      font-family: "NotoSansCJKjp-Jxck";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src:
        local("Noto Sans CJK JP Regular"),
        url("/assets/font/NotoSansCJKjp-Regular-Jxck-20201215.woff2") format("woff2");
    }
    /* normal bold */
    @font-face {
      font-family: "NotoSansCJKjp-Jxck";
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src:
        local("Noto Sans CJK JP Bold"),
        url("/assets/font/NotoSansCJKjp-Bold-Jxck-20201215.woff2") format("woff2");
    }


    /* mono regular */
    @font-face {
      font-family: "NotoSansMonoCJKjp-Jxck";
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src:
        local("Noto Sans Mono CJK JP Regular"),
        url("/assets/font/NotoSansMonoCJKjp-Regular-Jxck-20201215.woff2") format("woff2");
    }
    /* mono bold */
    @font-face {
      font-family: "NotoSansMonoCJKjp-Jxck";
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src:
        local("Noto Sans Mono CJK JP Bold"),
        url("/assets/font/NotoSansMonoCJKjp-Bold-Jxck-20201215.woff2") format("woff2");
    }

    /* Light Mode Theme */
    :root {
      --background-color: #fefefe;
      --font-color: #222;
      --header-color: #222;

      --anchor-color: RoyalBlue;
      --anchor-visited-color: Brown;

      --code-block: #f1f5f9;
      --code-block-font: #292929;

      --block-quote: #ddd;
      --table-border: #222;

      --regular-font: "Noto Sans", "Noto Sans CJK JP", "NotoSansCJKjp-Jxck", "Hiragino Sans", 'ヒラギノ角ゴ Pro W3', 'メイリオ', sans-serif;
      --mono-font: "NotoSansMonoCJKjp-Jxck";
      --code-font: Menlo, Consolas, Liberation, Mono, Courier, "NotoSansMonoCJKjp-Jxck";

      --icon-size: 30px;

      --width: 80vw;
      --max-width: 1024px;

      --grid: 1rem;

      --radius: 4px;
    }


    /* Mobile Theme */
    @media screen and (max-device-width: 960px) {
      :root {
        --width: 94vw;
      }

      audio {
        width: 100%;
      }
    }

    /* Dark Mode Theme */
    @media (prefers-color-scheme: dark) {
      :root {
        --header-color: #111;
        --background-color: #222;
        --font-color: #eee;

        --anchor-color: CornflowerBlue;
        --anchor-visited-color: RosyBrown;

        --code-block: #161b22;
        --code-block-font: #cad6e4;

        --table-border: #eee;
      }

      article img {
        filter: grayscale(50%);
      }
      article img[src*=svg] {
        filter: invert(100%) grayscale(50%);
      }
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--regular-font);
      background-color: var(--background-color);
      color: var(--font-color);
      font-feature-settings: "palt";
      margin: 0;
      padding: 0;
    }

    code {
      font-family: var(--mono-font);
    }

    img {
      max-width: 100%;
      height: auto;
    }

    hr {
      margin: 0;
      padding: 0;
    }

    iframe {
      display: block;
      max-width: 100%;
      margin: var(--grid) 0;
    }
    dl.info {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      margin: 0;
      padding: 0;
    }

    dl.info div {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
    }

    dl.info dt::after {
      content: ":";
      padding-inline-end: calc(var(--grid)/2);
    }

    dl.info dd {
      margin: 0 var(--grid) 0 0;
    }

    dl.info dd i {
      font-style: normal;
      padding-inline-end: calc(var(--grid)/3);
    }

    details.info > summary {
    }

    details.info ul {
      margin-block-start: 0;
      margin-inline-start: var(--grid);
    }

    nav.tags {
      display: inline;
    }

    .tags ul {
      display: inline-flex;
      margin: 0;
      padding: 0;
    }

    .tags li:before {
      content: none;
    }

    .tags li:first-child:before{
      content: "[ ";
    }

    .tags li:after {
      content: ",";
      padding-inline-end: 0.5rem;
    }

    .tags li:last-child:after {
      content: " ]";
    }
    header {
      z-index: 1;
      position: sticky;
      position: -webkit-sticky;
      top: 0;
      box-sizing: border-box;
      margin: 0;
      padding: calc(var(--grid)/2);
      background-color: var(--header-color);
    }

    h2:target,
    h3:target,
    h4:target,
    h5:target,
    h6:target {
      /* sticky header に合わせて link scroll をずらす */
      margin-block-start:  calc((var(--icon-size) + var(--grid)) * -1);
      padding-block-start: calc((var(--icon-size) + var(--grid)));
    }

    header nav {
      width: var(--width);
      max-width: var(--max-width);
      margin: 0 auto;
    }

    header nav ul {
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: stretch;
      margin: 0;
    }

    header nav li {
      width:  var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0 0 0 var(--grid);
    }

    header nav ul li a,
    header nav ul li button {
      display: block;
      width: var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0;
      border: none;
      background-color: var(--header-color);
    }

    header nav svg {
      fill: var(--background-color);
    }

    header nav ul li::before {
      content: none;
    }

    header nav ul li:first-child {
      flex-grow: 1;
      margin-inline-start: 0;
    }

    header nav .logo {
      border: 1px solid #fff;
      box-sizing: border-box;
    }
    h1 > a,
    h2 > a,
    h3 > a,
    h4 > a,
    h5 > a,
    h6 > a {
      color: var(--font-color);
    }

    h1 > a:visited,
    h2 > a:visited,
    h3 > a:visited,
    h4 > a:visited,
    h5 > a:visited,
    h6 > a:visited {
      color: var(--font-color);
    }

    h1 > a::before {
      content: "# ";
    }

    h2 > a::before {
      content: "## ";
    }

    h3 > a::before {
      content: "### ";
    }

    h4 > a::before {
      content: "#### ";
    }

    h1 > a:hover::before,
    h2 > a:hover::before,
    h3 > a:hover::before,
    h4 > a:hover::before,
    h5 > a:hover::before,
    h6 > a:hover::before {
      color: var(--anchor-visited-color);
    }

    em {
      font-weight: bold;
      font-style: normal;
    }

    em::before,
    em::after {
      content: "*";
    }

    strong {
      color: red;
    }

    strong::before,
    strong::after {
      content: "**";
    }

    ul li::before {
      content: "- ";
    }

    ol {
      counter-reset: list;
    }

    ol li::before {
      counter-increment: list;
      content: counter(list) ". ";
    }

    dl dt::after {
      content: ":";
    }

    blockquote {
      display: block;
      border: solid 1px var(--block-quote);
      border-radius: var(--radius);
      padding: 1rem;
      margin: 0;
    }

    blockquote p::before {
      content: "> ";
    }

    code {
      background-color: var(--code-block);
      color: var(--code-block-font);
      border-radius: var(--radius);
      padding: 0 4px;
    }

    code::before,
    code::after {
      content: "`";
    }
    main {
      display: block;
      width: var(--width);
      max-width: var(--max-width);
      margin: 1em auto;
    }

    a {
      word-wrap: break-word;
      text-decoration: none;
      color: var(--anchor-color);
    }

    a:visited {
      color: var(--anchor-visited-color);
    }

    ol,
    ul {
      list-style: none;
      padding-inline-start: 0;
    }

    li {
      word-break: break-all;
      word-wrap: break-word;
    }

    dl dt {
      font-weight: bold;
      margin: 0;
    }

    dl dd {
      margin: 0;
    }
    footer {
      padding: var(--grid);
    }

    footer strong,
    footer .copyright {
      width: var(--width);
      max-width: var(--max-width);
      margin: 0 auto;
      font-style: italic;
    }

    /* AdSense */
    footer ins {
      display: block;
      width: var(--width);
      max-width: var(--max-width);
      margin: 0 auto;
    }
    pre {
      margin: var(--grid) 0;
      border-radius: var(--radius);
    }

    pre::before {
      content: "```" attr(class) "\A";
    }

    pre::after {
      z-index: -1;
      position: relative;
      top: -1em;
      content: "\A```";
    }

    pre > code {
      font-family: var(--code-font);
      overflow: auto;
      display: block;
      padding: 0.5rem;
      margin: 0;
    }

    pre > code::before,
    pre > code::after {
      content: none;
    }

    .hljs-keyword {
      color: #ff407d;
    }

    .hljs-title {
      color: #b787ff;
    }

    .hljs-string {
      color: #84a3ff;
    }

    .hljs-number,
    .hljs-literal {
      color: #03b5f1;
    }

    .hljs-built_in {
      color: #17c103;
    }


    .hljs-regexp {
      color: #183691;
    }

    .hljs-comment {
      color: #96969c;
    }

    .hljs-tag {
      color: #a71d5d;
    }

    .hljs-name {
      color: #222222;
    }

    .hljs-strong {
      font-weight: bold;
    }

    .hljs-attribute {
      color: #5f87ff;
    }

    .hljs-meta {
      color: #4f80e5;
    }

    .hljs-selector-id,
    .hljs-selector-class,
    .hljs-selector-pseudo {
      color: #6f42c1;
    }

    .hljs-selector-tag {
      color: #22863a;
    }

    .hljs-subst {
      font-weight: bold;
    }

    .hljs-variable {
      color: #a71d5d;
    }

    .hljs-symbol {
      font-weight: bold;
    }

    .hljs-selector-attr {
      color: #6f42c1;
    }

    .hljs-bullet {
    }

    @media (prefers-color-scheme: dark) {
    }



    /**.hljs,**/
    .hljs-doctag,
    .hljs-code,
    .hljs-addition,
    .hljs-template-variable,
    .hljs-link,
    .hljs-quote,
    .hljs-template-tag,
    .hljs-deletion,
    .hljs-meta-string,
    .hljs-emphasis {
      /** 🙏🙏🙏
       * if you find element applyed this style, that's a bug.
       * please tell me https://github.com/jxck/jxck.io/issues
       **/
      font-size: 100em;
    }
    table {
      font-family: var(--mono-font);
      margin: var(--grid) 0;
      border-spacing: 0 0.4rem;
    }

    th {
      padding: 0 var(--grid) calc(var(--grid)/2) var(--grid);
      border-inline-start: 2px solid var(--table-border);
      border-block-end: 2px dashed var(--table-border);
    }

    td {
      padding: calc(var(--grid)/2) var(--grid);
      border-inline-start: 2px solid var(--table-border);
    }

    th:last-child,
    td:last-child {
      border-inline-end: 2px solid var(--table-border);
    }

    .align-center {
      text-align: center;
    }

    /** TODO: fixup html class */
    .align-left {
      text-align: start;
    }

    /** TODO: fixup html class */
    .align-right {
      text-align: end;
    }
  </style>
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href=https://blog.jxck.io      ><amp-img width=30 height=30 src=/assets/img/blog.svg   alt="blog logo" class=logo    ></a>
      <li><a href=/searches                 ><amp-img width=30 height=30 src=/assets/img/search.svg alt=search                    ></a>
      <li><a href=.                         ><amp-img width=30 height=30 src=/assets/img/up.svg     alt="move to parent directory"></a>
      <li><a href=/feeds/atom.xml           ><amp-img width=30 height=30 src=/assets/img/rss.svg    alt="rss feed"                ></a>
      <li><a href=https://jxck.io/humans.txt><amp-img width=30 height=30 src=/assets/img/humans.svg alt="huamns.txt"              ></a>
      <li><a href=https://jxck.io           ><amp-img width=30 height=30 src=/assets/img/jxck.svg   alt="jxck logo" class=logo    ></a>
    </ul>
  </nav>
</header>
<main>
  <dl class=info>
    <div><dt>created_at</dt><dd><time class=created_at datetime=2016-01-27>2016-01-27</time></dd></div>
    <div><dt>updated_at</dt><dd><time class=updated_at datetime=2020-12-18>2020-12-18</time></dd></div>
    <div>
      <dt class=tags>tags</dt>
      <dd>
        <nav>
          <ul>
            <li><a href="/tags/web.html">web</a>
            <li><a href="/tags/blog.html">blog</a>
          </ul>
        </nav>
      </dd>
    </div>
    <div>
      <dt>toc</dt>
      <dd>
        <details class=info>
          <summary>headdings</summary>
          <nav>
            <ul>
              <li><a href=#intro>## Intro</a>
              <li><a href=#motivation>## motivation</a>
              <li><a href=#test-section>## test section</a>
              <li><a href=#headding-section-3>### headding section 3</a>
              <li><a href=#headding-section-4>#### headding section 4</a>
              <li><a href=#リストスタイル>### リストスタイル</a>
              <li><a href=#定義リスト>### 定義リスト</a>
              <li><a href=#引用>## 引用</a>
              <li><a href=#テーブル>## テーブル</a>
              <li><a href=#イメージ>## イメージ</a>
              <li><a href=#サンプルコード>### サンプルコード</a>
            </ul>
          </nav>
        </details>
      </dd>
    </div>
  </dl>
  <article>
    <h1><a href=/entries/2016-01-27/new-blog-start.html>Blog を移転しました</a></h1>
    <section>
      <h2 id="intro"><a href="#intro">Intro</a></h2>
      <p>長いこと <a href="https://jxck.hatenablog.com/">はてな</a> をメインにし、他にも <a href="https://qiita.com/jxck_">Qiita</a> や <a href="http://jxck.tumblr.com/">Tumblr</a> を使って色々書いて来たが、そろそろ自分のドメインに全部集約していこうかと思う。
    </section>
    <section>
      <h2 id="motivation"><a href="#motivation">motivation</a></h2>
      <p>最近、メディア系は独自のサイトを持つよりも、 Medium などのサービス経由で流入してもらわないと辛いという話を良く聞くので、その意味では完全に逆行しているかもしれない。
      <p>しかし、別に PV を稼ぐためにブログを書いているわけでもないので、むしろ技術的にも自分で色々試せる自由な環境を持ち、特定のサービスに依存せずやってみるのも良いと考える。
      <p>むしろ、ドメイン自体は結構前に取っていたので、遅すぎるくらいなのだが、やっと重い腰を上げた。
      <p>まだ作り途中であり、一気に移行するのは難しいが、徐々に作りながらやっていこうと思う。
    </section>
    <section>
      <h2 id="test-section"><a href="#test-section">test section</a></h2>
      <p>以降は、本サイトのマークアップやスタイルをテストするためのセクションである。
      <p>対応している記法を列挙し、挙動を確認する。
      <section>
        <h3 id="headding-section-3"><a href="#headding-section-3">headding section 3</a></h3>
        <p>ここは <code translate="no">&lt;h3&gt;</code> セクションである。
        <section>
          <h4 id="headding-section-4"><a href="#headding-section-4">headding section 4</a></h4>
          <p>ここは <code translate="no">&lt;h4&gt;</code> セクションである。
        </section>
      </section>
      <section>
        <h3 id="リストスタイル"><a href="#リストスタイル">リストスタイル</a></h3>
        <p>リストスタイルは 2 つある
        <ol>
          <li>ordered list
          <li>un-ordered list
        </ol>
        <p>それぞれは使うタグが違う
        <ul>
          <li>ここはリストスタイルである
          <li>
            unordered list は <code translate="no">&lt;ul&gt;</code> を用いて表現する
          </li>
          <li>
            <code translate="no">&lt;li&gt;</code> の前には markdown と同じく <code translate="no">-</code> を表示する
            <ul>
              <li>入れ子にも対応している
            </ul>
          </li>
          <li>しかし 2 段階以上の深さは使わないようにする
        </ul>
      </section>
      <section>
        <h3 id="定義リスト"><a href="#定義リスト">定義リスト</a></h3>
        <p>定義リストは <code translate="no">&lt;dl&gt;</code> を用いて表現する
        <dl>
          <div>
            <dt>定義リスト(description list)
            <dd><code translate="no">&lt;dl&gt;</code> を用いる
          </div>
          <div>
            <dt>定義(description term)
            <dd><code translate="no">&lt;dt&gt;</code> を用いる
          </div>
          <div>
            <dt>説明(description details)
            <dd><code translate="no">&lt;dd&gt;</code> を用いる
          </div>
        </dl>
      </section>
    </section>
    <section>
      <h2 id="引用"><a href="#引用">引用</a></h2>
      <p>引用は <code translate="no">&lt;blockquote&gt;</code> を用いて表現する。
      <blockquote>
        <p>他のサイトなどから引用する場合は <code translate="no">&lt;blockquote&gt;</code> を用いて表現する。
        <p>複数行あると <code translate="no">&lt;p&gt;</code> に展開される
        <p>引用元の URL は <code translate="no">&lt;cite&gt;</code> を用いてマークアップする
        <p>&mdash; <cite><a href="https://example.com">example.com</a></cite>
      </blockquote>
    </section>
    <section>
      <h2 id="テーブル"><a href="#テーブル">テーブル</a></h2>
      <p>テーブルは <code translate="no">&lt;table&gt;</code> タグを用いて表現する。
      <table>
        <thead>
          <tr>
            <th class=align-left>範囲</th>
            <th class=align-right>文字数</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class=align-left>基本ラテン文字</td>
            <td class=align-right>94</td>
          </tr>
          <tr>
            <td class=align-left>CJK 記号と句読点</td>
            <td class=align-right>11</td>
          </tr>
          <tr>
            <td class=align-left>ひらがな</td>
            <td class=align-right>81</td>
          </tr>
          <tr>
            <td class=align-left>カタカナ</td>
            <td class=align-right>83</td>
          </tr>
          <tr>
            <td class=align-left>半角形と全角形</td>
            <td class=align-right>0</td>
          </tr>
          <tr>
            <td class=align-left>常用漢字</td>
            <td class=align-right>2136</td>
          </tr>
          <tr>
            <td class=align-left>記号</td>
            <td class=align-right>1</td>
          </tr>
          <tr>
            <td class=align-left>不要文字</td>
            <td class=align-right>- 23</td>
          </tr>
          <tr>
            <td class=align-left>追加更新</td>
            <td class=align-right>13</td>
          </tr>
          <tr>
            <td class=align-left>合計</td>
            <td class=align-right>2396</td>
          </tr>
        </tbody>
      </table>
      <table>
        <thead>
          <tr>
            <th class=align-left>file type</th>
            <th class=align-right>size</th>
            <th class=align-right>ratio</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class=align-left>.webp</td>
            <td class=align-right>9474</td>
            <td class=align-right>100%</td>
          </tr>
          <tr>
            <td class=align-left>.webp.gz</td>
            <td class=align-right>2609</td>
            <td class=align-right>28%</td>
          </tr>
          <tr>
            <td class=align-left>.webp.br</td>
            <td class=align-right>2544</td>
            <td class=align-right>27%</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section>
      <h2 id="イメージ"><a href="#イメージ">イメージ</a></h2>
      <p>イメージは <code translate="no">&lt;img&gt;</code> タグを用いて表現する。
      <p>
        <amp-img layout=responsive src=https://logo.jxck.io/jxck.256x256.png#256x256 alt="jxck" title="jxck logo" width=256 height=256>
      </p>
      <section>
        <h3 id="サンプルコード"><a href="#サンプルコード">サンプルコード</a></h3>
        <p>インラインの場合は <code translate="no">&lt;code&gt;</code> タグを用いて表現する。
        <p>コードブロックの場合は <code translate="no">&lt;pre&gt;</code> と <code translate="no">&lt;code&gt;</code> を用いて表現する。
        <pre class=http><code translate="no"># デフォルトリクエスト
GET / HTTP/1.1
Host: example.com
User-Agent: browser
Accept-Encoding: br, gz
Accept-Language: ja-JP</code></pre>
        <pre class=js><code translate="no">class Test {
  constructor(arg) {
    this.arg = arg
  }
  print() {
    console.log(this.arg)
  }
}

const test = new Test(&#39;hello&#39;)
test.print() // hello</code></pre>
        <p>ファイルからコードを読むこともできる。以下ハイライトテスト用。
        <pre class=js><code translate="no">class Test {
  constructor(arg) {
    this.arg = arg
  }
  print() {
    console.log(this.arg)
  }
}

const test = new Test(&#39;hello&#39;)
test.print() // hello</code></pre>
        <pre class=rb><code translate="no">#!/usr/bin/env ruby
`rm *.gz`
`rm result`
`touch result`
(1..10)
  .map { |i| i * 10 }
  .each { |i| `time -v -a -o result zopfli --i#{i} -c loading-css-over-http2.html &gt; loading-css-over-http2.html.#{i}.gz` }</code></pre>
        <pre class=js><code translate="no">const URL = require(&#39;url&#39;).URL;

const u = new URL(&#39;https://jxck.io?log=warn&amp;lang=ja&#39;);
const searchParams = u.searchParams;
searchParams.get(&#39;log&#39;) // &quot;warn&quot;
searchParams.getAll(&#39;log&#39;) // [&quot;warn&quot;]
searchParams.delete(&#39;log&#39;) // undefined
searchParams.has(&#39;log&#39;) // false
searchParams.append(&#39;debug&#39;, true) // undefined
searchParams.toString() // &quot;lang=ja&amp;debug=true&quot;

for ([k, v] of searchParams) {
  console.log(k, v);
  // lang ja
  // debug true
}</code></pre>
        <pre class=js><code translate="no">const URL = require(&#39;url&#39;).URL;

// 日本語ドメイン
const jp = new URL(&#39;https://じゃっく.jp&#39;);
console.log(jp);
// URL {
//   href: https://xn--y8jr7a5i.jp/
//   protocol: https:
//   hostname: xn--y8jr7a5i.jp
//   pathname: /
// }

// IPv6
const ipv6 = new URL(&#39;https://[::1]/&#39;);
console.log(ipv6);
// URL {
//   href: https://[::1]/
//   protocol: https:
//   hostname: [::1]
//   pathname: /
// }

// 日本語
const ja = new URL(&#39;https://example.com/ぱす?きー=ばりゅー&#39;);
console.log(ja);
// URL {
//   href: https://example.com/%E3%81%B1%E3%81%99?%E3%81%8D%E3%83%BC=%E3%81%B0%E3%82%8A%E3%82%85%E3%83%BC
//   protocol: https:
//   hostname: example.com
//   pathname: /%E3%81%B1%E3%81%99
//   search: ?%E3%81%8D%E3%83%BC=%E3%81%B0%E3%82%8A%E3%82%85%E3%83%BC
// }</code></pre>
        <pre class=js><code translate="no">const URL = require(&#39;url&#39;).URL;

const u = new URL(&#39;https://jxck:password@blog.jxck.io/path/to/entry?log=true&amp;lang=ja#main&#39;);
console.log(u);
// URL {
//   href: https://jxck:password@blog.jxck.io/path/to/entry?log=true&amp;lang=ja#main
//   protocol: https:
//   username: jxck
//   password: --------
//   hostname: blog.jxck.io
//   pathname: /path/to/entry
//   search: ?log=true&amp;lang=ja
//   hash: #main
// }</code></pre>
        <pre class=js><code translate="no">self.addEventListener(&#39;install&#39;, (e) =&gt; {
  console.log(&#39;install&#39;);
  e.registerForeignFetch({
    scopes: [&#39;/random/number&#39;], // or self.registration.scope to handle everything
    origins: [&#39;*&#39;] // or [&#39;https://client1.com&#39;] to limit the remote origins
  });
});

self.addEventListener(&#39;activate&#39;, (e) =&gt; {
  console.log(&#39;activate&#39;);
});

self.addEventListener(&#39;fetch&#39;, (e) =&gt; {
  console.log(&#39;fetch&#39;);
});

self.addEventListener(&#39;foreignfetch&#39;, (e) =&gt; {
  console.log(&#39;foreignfetch&#39;);
  e.respondWith(
    fetch(e.request)
      .then((response) =&gt; {
        console.log(&#39;online response&#39;);
        return {
          response,
          origin: e.origin // Make this a CORS response
        };
      })
      .catch(() =&gt; {
        console.log(&#39;offline response&#39;);
        return {
          response: new Response(Math.floor(Math.random()*100)),
          origin: e.origin // Make this a CORS response
        };
      })
  );
});</code></pre>
        <pre class=js><code translate="no">const CACHE = &quot;foreign-fetch&quot;;
self.addEventListener(&#39;install&#39;, (e) =&gt; {
  console.info(&#39;install&#39;, e);

  e.waitUntil(
    caches.open(CACHE).then((cache) =&gt; {
      return cache.addAll([
        &#39;.&#39;,
        &#39;./index.html&#39;,
        &#39;./worker.js&#39;
      ])
    })
  );
});

self.addEventListener(&#39;activate&#39;, (e) =&gt; {
  console.info(&#39;activate&#39;, e);

  e.waitUntil(self.clients.claim());
});

self.addEventListener(&#39;fetch&#39;, (e) =&gt; {
  console.info(&#39;fetch&#39;, e.request);

  e.respondWith(
    caches.open(CACHE).then((cache) =&gt; {
      return cache.match(e.request).then((cached) =&gt; {
        console.log(&#39;cached&#39;, cached);
        return cached || fetch(e.request);
      }).catch(console.error.bind(console))
    })
  );
});</code></pre>
        <pre class=js><code translate="no">callback = console.log.bind(console)
process.on(&#39;foo&#39;, callback)
process.emit(&#39;foo&#39;, &#39;bar&#39;)
// bar
process.removeListener(&#39;foo&#39;, callback)</code></pre>
        <pre class=js><code translate="no">callback = console.log.bind(console)
$div = document.createElement(&#39;div&#39;)
$div.addEventListener(&#39;foo&#39;, callback)
$div.dispatchEvent(new CustomEvent(&#39;foo&#39;, {detail:&#39;bar&#39;}))
// CustomEvent {type: &quot;foo&quot;, detail: &#39;bar&#39;...
$div.removeEventListener(&#39;foo&#39;, callback)</code></pre>
        <pre class=js><code translate="no">EventEmitter = require(&#39;events&#39;)
class Timer extends EventEmitter {
  constructor(interval) {
    super()
    setInterval(() =&gt; {
      this.emit(&#39;tick&#39;, &#39;tick&#39;)
    }, interval)
  }
}

timer = new Timer(100)
timer.on(&#39;tick&#39;, console.log.bind(console))</code></pre>
        <pre class=js><code translate="no">class Timer extends EventTarget {
  constructor(interval) {
    super()
    setInterval(() =&gt; {
      this.dispatchEvent(new CustomEvent(&#39;tick&#39;))
    }, interval)
  }
}

timer = new Timer(100)
timer.addEventListener(&#39;tick&#39;, console.log.bind(console))</code></pre>
        <pre class=js><code translate="no">function main() {
  // AbortController class が追加される
  const controller = new AbortController()

  // キャンセルを通知するための siganl が取得できる
  const signal = controller.signal

  startSpinner()

  // signal を第二引数に渡す
  fetch(url, {signal})
    .then((res) =&gt; {
      // レスポンスの処理
    })
    .catch((err) =&gt; {
      if (err.name == &#39;AbortError&#39;) {
        // 中断の場合の処理
        return
      }
      // 中断以外のエラー処理
      console.error(err)
    })
    .then(() =&gt; {
      // finally 相当
      stopSpinner()
    })


  // fetch が 1000ms 超えたらコントローラ経由で中断する
  setTimeout(() =&gt; {
    controller.abort()
  }, 1000)
}</code></pre>
        <pre class=js><code translate="no">class LongTask extends EventTarget {
  start() {
    //...
  }
  stop() {
    //...
  }
}

function longTaskPromise({signal}) {
  return new Promise((resolve, reject) =&gt; {
    // 処理の Promise 化
    let longTask = new LongTask()
    longTask.addEventListener(&#39;data&#39;, resolve)
    longTask.addEventListener(&#39;error&#39;, reject)
    longTask.start()

    // abort signal のハンドリング
    signal.addEventListener(&#39;abort&#39;, () =&gt; {
      longTask.stop()
      reject(new DOMException(&#39;Aborted&#39;, &#39;AbortError&#39;))
    })
  })
}


function main() {
  // AbortController class が追加される
  const controller = new AbortController()

  // キャンセルを通知するための siganl が取得できる
  const signal = controller.signal

  startSpinner()

  // signal を第二引数に渡す
  longTaskPromise({signal})
    .then((result) =&gt; {
      // 結果の正常処理
    })
    .catch((err) =&gt; {
      if (err.name == &#39;AbortError&#39;) {
        // 中断の場合の処理
        return
      }
      // 中断以外のエラー
      console.error(err)
    })
    .then(() =&gt; {
      // finally
      stopSpinner()
    })


  // fetch が 1000ms 超えたらコントローラ経由で中断する
  setTimeout(() =&gt; {
    controller.abort()
  }, 1000)
}</code></pre>
        <pre class=js><code translate="no">const controlle = new AbortController()
const signal = controller.signal

// 同じリソースを複数のミラーに問い合わせて
// 一番早く返ってきたやつだけ使いたい的な例
Promise.race([
  fetch(url, {signal}),
  fetch(mirror1, {signal}),
  fetch(mirror2, {signal}),
  fetch(mirror3, {signal}),
]).then((res) =&gt; {
  // 最初のレスポンス
  console.log(res)
  // そのままでは残りの fetch も走るので
  // それらを止める。
  controller.abort()
}).catch((err) =&gt; {
  if (err.name == &#39;AbortError&#39;) {
    // ここに来るのは race が終わる前に Abort した場合
    // race が終わった後の abort はここに来ない
    return
  }
  // race の失敗
  console.error(err)
})</code></pre>
        <pre class=erl><code translate="no">#!/usr/bin/env escript
-module(main).

-mode(compile).
-compile(export_all).

-define(Log(A),                (fun(P) -&gt; io:format(&quot;[~p:~p#~p] ~p~n&quot;,     [?MODULE, ?FUNCTION_NAME, ?LINE, P]), P end)(A)).

-define(RtoM(Name, Record), lists:foldl(fun({I, E}, Acc) -&gt; Acc#{E =&gt; element(I, Record) } end, #{}, lists:zip(lists:seq(2, (record_info(size, Name))), (record_info(fields, Name))))).

-record(point, {x, y}).
main(_) -&gt;
    Point = #point{x=10, y=20},
    ?Log(Point),
    ?Log(?RtoM(point, Point)),
    ok.</code></pre>
        <pre class=rb><code translate="no">#!/usr/bin/env ruby
require &quot;base64&quot;
require &quot;json&quot;
require &quot;net/http&quot;
require &quot;openssl&quot;
require &quot;pp&quot;
require &quot;uri&quot;

# ./ct.rb ct.googleapis.com/pilot ./path-to-letsencrypt-live/fullchain.pem
main(*ARGV)

def get_proof_by_hash(host, cert, tree_size, timestamp)
  der = cert.to_der

  blob = [
    0, # prefix (uint8)
    0, # v1 (uint8)
    0, # timestamped_entry (uint8)
    timestamp, # timestamp (uint32)
    0, # x509_entry (uint16)

    # length in 24bit
    (der.size &gt;&gt; 16) &amp; 255,
    (der.size &gt;&gt;  8) &amp; 255,
    (der.size &gt;&gt;  0) &amp; 255,

    der, # der (binary)

    0, # extension (uint16)
  ].pack(&quot;C3Q&gt;nC3a*n&quot;)

  sha256 = OpenSSL::Digest::SHA256.digest(blob)
  base64 = Base64.encode64(sha256).chomp
  param = URI.encode_www_form(&quot;hash&quot; =&gt; base64, &quot;tree_size&quot; =&gt; tree_size)

  ## Debug
  # puts &quot;timestamp = #{timestamp}&quot;
  # puts &quot;tree_size = #{tree_size}&quot;
  # puts &quot;sha256 = #{OpenSSL::Digest::SHA256.hexdigest(blob)}&quot;
  # puts &quot;base64 = #{base64}&quot;

  uri = URI.parse(&quot;https://#{host}/ct/v1/get-proof-by-hash?#{param}&quot;)
  request = Net::HTTP::Get.new(uri)
  response = Net::HTTP.start(uri.hostname, uri.port, {use_ssl: true}) do |http|
    http.request(request)
  end

  puts &quot;\e[0;31m$ curl &#39;#{uri}&#39; | jq .\e[0m&quot;
  pp JSON.parse(response.body)
end

def get_sth(host)
  uri    = URI.parse(&quot;https://#{host}/ct/v1/get-sth&quot;)
  json   = Net::HTTP.get(uri)
  result = JSON.parse(json)

  puts &quot;\e[0;31m$ curl &#39;#{uri}&#39; | jq .\e[0m&quot;
  pp result
end

def add_chain(host, chain)
  uri = URI.parse(&quot;https://#{host}/ct/v1/add-chain&quot;)
  request = Net::HTTP::Post.new(uri)
  request.content_type = &quot;application/json&quot;

  str = chain.map{|cert|
    cert
      .to_pem
      .gsub(&quot;-----BEGIN CERTIFICATE-----\n&quot;, &quot;&quot;)
      .gsub(&quot;-----END CERTIFICATE-----\n&quot;, &quot;&quot;)
      .gsub(&quot;\n&quot;, &quot;&quot;)
  }

  request.body = JSON.dump({
    &quot;chain&quot; =&gt; str
  })

  response = Net::HTTP.start(uri.hostname, uri.port, {use_ssl: true}) do |http|
    http.request(request)
  end

  puts &lt;&lt;-EOS
\e[0;31m$ curl -H &#39;Content-Type:application/json&#39; \\
       -d &#39;{ &quot;chain&quot;: #{str} }&#39; \\
       #{uri} | jq . \e[0m
EOS

  pp JSON.parse(response.body)
end

def main(host = &quot;ct.googleapis.com/pilot&quot;, pemfile)
  puts &quot;host = #{host}&quot;
  puts &quot;pemfile = #{pemfile}&quot;
  chain = File.read(pemfile)
    .split(&quot;-----END CERTIFICATE-----\n&quot;)
    .map{|str| str + &quot;-----END CERTIFICATE-----\n&quot;}
    .map{|str| OpenSSL::X509::Certificate.new(str) }

  tree_size = get_sth(host)[&quot;tree_size&quot;]
  puts &quot;&quot;
  timestamp = add_chain(host, chain)[&quot;timestamp&quot;]
  puts &quot;&quot;
  get_proof_by_hash(host, chain[0], tree_size, timestamp)
end</code></pre>
        <pre class=sh><code translate="no">curl -H &#39;Content-Type:application/json&#39; \
     -d &#39;{ &quot;chain&quot;: [&quot;MIIFvTCCBKWgAwIBAgISA6/EsoaosazyV8VTiLTZMzBzMA0GCSqGSIb3DQEBCwUAMEoxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MSMwIQYDVQQDExpMZXQncyBFbmNyeXB0IEF1dGhvcml0eSBYMzAeFw0xODAzMDYwNjA5MDZaFw0xODA2MDQwNjA5MDZaMBIxEDAOBgNVBAMTB2p4Y2suaW8wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC7UnbgMfyQOVAqOp9oNjcoHZ2p0H0sUkFERYzZ2VXXJRkg7QzFrZTAP7jdxw/HEhkMJTMNlX59cvEyxiEbgNqTLYQjwSP1Ibgtkjzq2EPlm2SsFkq6vwbuydZA31HQa2vEYqZzo9RUG69T4URUotmtZBTWqW5w8m9l9xwCuInzOxS8990rVW27FiWtSF+4HI/mBTzHAX/w1dJRaT9ESrWJnmKYcYCBayCswEfp9b6uOgNWASZBd67lKE2AfE0FDdgKclElttBbvK8Kl2TNpCzwRwwzt54Bt9AFt8MZr4p4SKUjuj5GkcFrlnvyESbXJuyZwnnUCNkbxxYP0LfsgfmnAgMBAAGjggLTMIICzzAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFMnlleIsgD60xDmW8Pz/yWKKPjk4MB8GA1UdIwQYMBaAFKhKamMEfd265tE5t6ZFZe/zqOyhMG8GCCsGAQUFBwEBBGMwYTAuBggrBgEFBQcwAYYiaHR0cDovL29jc3AuaW50LXgzLmxldHNlbmNyeXB0Lm9yZzAvBggrBgEFBQcwAoYjaHR0cDovL2NlcnQuaW50LXgzLmxldHNlbmNyeXB0Lm9yZy8wgd0GA1UdEQSB1TCB0oINYWRtaW4uanhjay5pb4ILYXBpLmp4Y2suaW+CDGJsb2cuanhjay5pb4INZmlsZXMuanhjay5pb4IHanhjay5pb4IMbGFiMi5qeGNrLmlvggxsYWJzLmp4Y2suaW+CDGxvZ28uanhjay5pb4INcmFpbHMuanhjay5pb4IScmVwb3J0LXVyaS5qeGNrLmlvggtzZnUuanhjay5pb4INc2xpZGUuanhjay5pb4IMc3BlYy5qeGNrLmlvggp3cy5qeGNrLmlvggt3d3cuanhjay5pbzCB/gYDVR0gBIH2MIHzMAgGBmeBDAECATCB5gYLKwYBBAGC3xMBAQEwgdYwJgYIKwYBBQUHAgEWGmh0dHA6Ly9jcHMubGV0c2VuY3J5cHQub3JnMIGrBggrBgEFBQcCAjCBngyBm1RoaXMgQ2VydGlmaWNhdGUgbWF5IG9ubHkgYmUgcmVsaWVkIHVwb24gYnkgUmVseWluZyBQYXJ0aWVzIGFuZCBvbmx5IGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgQ2VydGlmaWNhdGUgUG9saWN5IGZvdW5kIGF0IGh0dHBzOi8vbGV0c2VuY3J5cHQub3JnL3JlcG9zaXRvcnkvMA0GCSqGSIb3DQEBCwUAA4IBAQA6Tnb6wxUgQE7mnf8N+5PgIzC5ebxjGps/I2ppEqnvuAECdrkWySdqPDG8e7lyuyxzzav6FTFUb3y8EwDrdT+UDquewpv6TxoP1NcnuMRhpjV41Y/otxRW53+Fz+g+Ub4XTnrJmK98aq8vzyMpvkWhHPMfs2xRsIkNH6L/T0h+8AL7MpKLiuqiy9SA4COVjNLX5Z2ZyK/xPaNhfJ1jv7vs/fvIGNLtJ7sCwVa54r8OycNVd1nj9zVFmtJ554S3fRBNFI5vZNJJw4npN1/q1bQ1B7oo8U1pLunDxqhvNHO247WDRVBeCvJLuZGZJc4g35W97iUTVVbwPLVfK4o82MOD&quot;, &quot;MIIEkjCCA3qgAwIBAgIQCgFBQgAAAVOFc2oLheynCDANBgkqhkiG9w0BAQsFADA/MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMTDkRTVCBSb290IENBIFgzMB4XDTE2MDMxNzE2NDA0NloXDTIxMDMxNzE2NDA0NlowSjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUxldCdzIEVuY3J5cHQxIzAhBgNVBAMTGkxldCdzIEVuY3J5cHQgQXV0aG9yaXR5IFgzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnNMM8FrlLke3cl03g7NoYzDq1zUmGSXhvb418XCSL7e4S0EFq6meNQhY7LEqxGiHC6PjdeTm86dicbp5gWAf15Gan/PQeGdxyGkOlZHP/uaZ6WA8SMx+yk13EiSdRxta67nsHjcAHJyse6cF6s5K671B5TaYucv9bTyWaN8jKkKQDIZ0Z8h/pZq4UmEUEz9l6YKHy9v6Dlb2honzhT+Xhq+w3Brvaw2VFn3EK6BlspkENnWAa6xK8xuQSXgvopZPKiAlKQTGdMDQMc2PMTiVFrqoM7hD8bEfwzB/onkxEz0tNvjj/PIzark5McWvxI0NHWQWM6r6hCm21AvA2H3DkwIDAQABo4IBfTCCAXkwEgYDVR0TAQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwfwYIKwYBBQUHAQEEczBxMDIGCCsGAQUFBzABhiZodHRwOi8vaXNyZy50cnVzdGlkLm9jc3AuaWRlbnRydXN0LmNvbTA7BggrBgEFBQcwAoYvaHR0cDovL2FwcHMuaWRlbnRydXN0LmNvbS9yb290cy9kc3Ryb290Y2F4My5wN2MwHwYDVR0jBBgwFoAUxKexpHsscfrb4UuQdf/EFWCFiRAwVAYDVR0gBE0wSzAIBgZngQwBAgEwPwYLKwYBBAGC3xMBAQEwMDAuBggrBgEFBQcCARYiaHR0cDovL2Nwcy5yb290LXgxLmxldHNlbmNyeXB0Lm9yZzA8BgNVHR8ENTAzMDGgL6AthitodHRwOi8vY3JsLmlkZW50cnVzdC5jb20vRFNUUk9PVENBWDNDUkwuY3JsMB0GA1UdDgQWBBSoSmpjBH3duubRObemRWXv86jsoTANBgkqhkiG9w0BAQsFAAOCAQEA3TPXEfNjWDjdGBX7CVW+dla5cEilaUcne8IkCJLxWh9KEik3JHRRHGJouM2VcGfl96S8TihRzZvoroed6ti6WqEBmtzw3Wodatg+VyOeph4EYpr/1wXKtx8/wApIvJSwtmVi4MFU5aMqrSDE6ea73Mj2tcMyo5jMd6jmeWUHK8so/joWUoHOUgwuX4Po1QYz+3dszkDqMp4fklxBwXRsW10KXzPMTZ+sOPAveyxindmjkW8lGy+QsRlGPfZ+G6Z6h7mjem0Y+iWlkYcV4PIWL1iwBi8saCbGS5jN2p8M+X+Q7UNKEkROb3N6KOqkqm57TH2H3eDJAkSnh6/DNFu0Qg==&quot;] }&#39; \
     https://ct.googleapis.com/pilot/ct/v1/add-chain | jq .

curl &#39;https://ct.googleapis.com/pilot/ct/v1/get-sth&#39; | jq .

curl &#39;https://ct.googleapis.com/pilot/ct/v1/get-proof-by-hash?hash=odRjuexWzJ36zh8XavhDEZaUhoAv9yxRF4zEyKZiVVg%3D&amp;tree_size=237363285&#39; | jq .</code></pre>
        <pre class=golang><code translate="no">package main

import (
	&quot;bytes&quot;
	&quot;crypto/sha256&quot;
	&quot;encoding/base64&quot;
	&quot;encoding/binary&quot;
	&quot;encoding/pem&quot;
	&quot;io/ioutil&quot;
	&quot;log&quot;
	&quot;os&quot;
)

func init() {
	log.SetFlags(log.Lshortfile)
}

var p = log.Println

func main() {
	// fullchain.pem を読み込む
	path := os.Args[1]
	file, _ := ioutil.ReadFile(path)

	// チェインの各証明書をデコード
	var chain []*pem.Block
	for {
		var block *pem.Block
		block, file = pem.Decode(file)
		if block == nil {
			break
		}
		chain = append(chain, block)
	}

	// enum { v1(0), (255) } Version;
	type Version uint8
	var v1 Version = 0

	// enum { timestamped_entry(0), (255) } MerkleLeafType;
	type MerkleLeafType uint8
	var timestamped_entry MerkleLeafType = 0

	// timestamp
	var timestamp uint64 = 1520467826187

	// enum { x509_entry(0), precert_entry(1), (65535) } LogEntryType;
	type LogEntryType uint16
	var x509_entry LogEntryType = 0

	buf := bytes.NewBuffer([]byte{})

	// prefix
	var prefix uint8 = 0
	binary.Write(buf, binary.BigEndian, prefix)

	// MerkleTreeLeaf
	binary.Write(buf, binary.BigEndian, v1)
	binary.Write(buf, binary.BigEndian, timestamped_entry)

	// TimestampedEntry
	binary.Write(buf, binary.BigEndian, timestamp)
	binary.Write(buf, binary.BigEndian, x509_entry)

	// opaque ASN.1Cert&lt;1..2^24-1&gt;;
	// 24bit length
	var certlen uint32 = uint32(len(chain[0].Bytes))
	binary.Write(buf, binary.BigEndian, uint8(certlen&gt;&gt;16&amp;255))
	binary.Write(buf, binary.BigEndian, uint8(certlen&gt;&gt;8&amp;255))
	binary.Write(buf, binary.BigEndian, uint8(certlen&gt;&gt;0&amp;255))
	// cert
	binary.Write(buf, binary.BigEndian, chain[0].Bytes)

	// opaque CtExtensions&lt;0..2^16-1&gt;;
	var extension uint16 = 0
	binary.Write(buf, binary.BigEndian, extension)
	p(len(buf.Bytes()), buf.Bytes())

	// MTH({d(0)}) = SHA-256(0x00 || d(0)).
	// prefix=0x00 はすでに加えてある
	hash := sha256.Sum256(buf.Bytes())
	log.Printf(&quot;%x&quot;, hash)

	p(base64.URLEncoding.EncodeToString(hash[:]))

	// この hash をつけてリクエスト
	p(&quot;curl &#39;https://ct.googleapis.com/rocketter/ct/v1/get-proof-by-hash?hash=xxx&amp;tree_size=yyy&#39;&quot;)
}</code></pre>
        <pre class=http><code translate="no">Content-Security-Policy: default-src &#39;self&#39; report-uri https://report-uri.example.com</code></pre>
        <pre class=http><code translate="no">Content-Security-Policy: default-src &#39;self&#39; report-to=default-endpoint
Feature-Policy: syncxhr &#39;none&#39; report-to=default-endpoint
NEL: {&quot;report-to&quot;: &quot;default-endpoint&quot;, &quot;max-age&quot;: 2592000}
Report-To: {
             &quot;group&quot;: &quot;default-endpoint&quot;,
             &quot;max-age&quot;: &quot;36000&quot;,
             &quot;endpoints&quot;: [
               {&quot;url&quot;: &quot;https://report-uri.example.com&quot;},
               {&quot;url&quot;: &quot;https://report-uri2.example.com&quot;}
             ]
           }</code></pre>
        <pre class=js><code translate="no">const observer = new ReportingObserver((reports, observer) =&gt; {
  const message = JSON.stringify(reports)
  navigator.sendBeacon(&quot;https://report-uri.example.com&quot;, message)
});

observer.observe();</code></pre>
        <pre class=http><code translate="no">Report-To: {
             &quot;max_age&quot;: 36000,
             &quot;endpoints&quot;: [
               {
                 &quot;url&quot;: &quot;https://reports.example.com/default-endpoint&quot;
               }
             ]
           },
           {
             &quot;group&quot;: &quot;csp-endpoint&quot;,
             &quot;include_subdomains&quot;: true,
             &quot;max_age&quot;: 36000,
             &quot;endpoints&quot;: [
               {
                 &quot;url&quot;: &quot;https://reports.example.com/csp-endpoint1&quot;,
                 &quot;priority&quot;: 1,
                 &quot;weight&quot;: 50
               },
               {
                 &quot;url&quot;: &quot;https://reports.example.com/csp-endpoint2&quot;,
                 &quot;priority&quot;: 1,
                 &quot;weight&quot;: 50
               },
               {
                 &quot;url&quot;: &quot;https://failover.example.com/csp-endpoint&quot;,
                 &quot;priority&quot;: 2
               }
             ]
           }</code></pre>
        <pre class=http><code translate="no">Content-Security-Policy: default-src &#39;self&#39; report-to=csp-endpoint
Feature-Policy: syncxhr &#39;none&#39; report-to=default
NEL: {&quot;report-to&quot;: &quot;default&quot;, &quot;max-age&quot;: 2592000}
Report-To: {
             &quot;group&quot;: &quot;default&quot;,
             &quot;max_age&quot;: 36000,
             &quot;endpoints&quot;: [{ &quot;url&quot;: &quot;https://reports.example.com/default-endpoint&quot; }]
           },
           {
             &quot;group&quot;: &quot;csp-endpoint&quot;,
             &quot;endpoints&quot;: [{ &quot;url&quot;: &quot;https://reports.example.com/csp-endpoint&quot; }]
           }</code></pre>
        <pre class=http><code translate="no">POST /default-endpoint HTTP/1.1
Host: reports.example.com
Content-Type: application/reports+json
Content-Length: 999

[
  {
    &quot;type&quot;: &quot;csp&quot;,
    &quot;url&quot;: &quot;https://example.com/csp.html/&quot;,
    &quot;body&quot;: {...}
  },
  {
    &quot;type&quot;: &quot;nel&quot;,
    &quot;url&quot;: &quot;https://example.com/nel.html/&quot;,
    &quot;body&quot;: {...}
  },
  {
    &quot;type&quot;: &quot;hpkp&quot;,
    &quot;url&quot;: &quot;https://example.com/hpkp.html/&quot;,
    &quot;body&quot;: {...}
  },
]</code></pre>
        <pre class=js><code translate="no">{
  &quot;type&quot;: &quot;deprecation&quot;,
    &quot;url&quot;: &quot;https://blog.jxck.io/entries/2018-05-15/webauthentication-api.html&quot;,
    &quot;body&quot;: {
      &quot;id&quot;: &quot;ChromeLoadTimesWasAlternateProtocolAvailable&quot;,
      &quot;anticipatedRemoval&quot;: null,
      &quot;message&quot;: &quot;chrome.loadTimes() is deprecated, instead use standardized API: nextHopProtocol in Navigation Timing 2. https://www.chromestatus.com/features/5637885046816768.&quot;,
      &quot;sourceFile&quot;: &quot;chrome-extension://mpbpobfflnpcgagjijhmgnchggcjblin/content.js&quot;,
      &quot;lineNumber&quot;: 5,
      &quot;columnNumber&quot;: 19
    }
}

{
  &quot;type&quot;: &quot;deprecation&quot;,
    &quot;age&quot;: 27,
    &quot;url&quot;: &quot;https://example.com/&quot;,
    &quot;user_agent&quot;: &quot;Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0&quot;,
    &quot;body&quot;: {
      &quot;id&quot;: &quot;websql&quot;,
      &quot;anticipatedRemoval&quot;: &quot;1/1/2020&quot;,
      &quot;message&quot;: &quot;WebSQL is deprecated and will be removed in Chrome 97 around January 2020&quot;,
      &quot;sourceFile&quot;: &quot;https://example.com/index.js&quot;,
      &quot;lineNumber&quot;: 1234,
      &quot;columnNumber&quot;: 42
    }
}</code></pre>
        <pre class=cpp><code translate="no">// device_scale_factor = DPR
// source_size = sizes attr value
static ImageCandidate PickBestImageCandidate(float device_scale_factor, float source_size, Vector&lt;ImageCandidate&gt;&amp; image_candidates, Document* document = nullptr) {
  const float kDefaultDensityValue = 1.0;
  bool ignore_src = false;

  // 画像がなければ無視
  if (image_candidates.IsEmpty()) {
    return ImageCandidate();
  }

  // 画像ごとに表示領域に対する密度を計算(1.0 だとフィット)
  // http://picture.responsiveimages.org/#normalize-source-densities
  for (ImageCandidate&amp; image : image_candidates) {
    if (image.GetResourceWidth() &gt; 0) {
      float gensity = (float)image.GetResourceWidth() / source_size;
      image.SetDensity(gensity);
      ignore_src = true;
    } else if (image.Density() &lt; 0) {
      image.SetDensity(kDefaultDensityValue);
    }
  }

  // 密度でソート
  std::stable_sort(image_candidates.begin(), image_candidates.end(), CompareByDensity);

  Vector&lt;ImageCandidate*&gt; de_duped_image_candidates;
  float prev_density = -1.0;

  // 同じ密度を省く?
  for (ImageCandidate&amp; image : image_candidates) {
    if (image.Density() != prev_density &amp;&amp; (!ignore_src || !image.SrcOrigin())) {
      de_duped_image_candidates.push_back(&amp;image);
    }
    prev_density = image.Density();
  }

  // SelectionLogic で画像を選択
  // Save Data してる場合は一番小さいの、ここでは無視
  // unsigned winner = blink::WebNetworkStateNotifier::SaveDataEnabled() &amp;&amp; base::FeatureList::IsEnabled(blink::features::kSaveDataImgSrcset) ? 0 : SelectionLogic(de_duped_image_candidates, device_scale_factor);
  unsigned winner = SelectionLogic(de_duped_image_candidates, device_scale_factor);
  DCHECK_LT(winner, de_duped_image_candidates.size());
  winner = AvoidDownloadIfHigherDensityResourceIsInCache(de_duped_image_candidates, winner, document);

  float winning_density = de_duped_image_candidates[winner]-&gt;Density();
  // 16. If an entry b in candidates has the same associated ... pixel density
  // as an earlier entry a in candidates,
  // then remove entry b
  while ((winner &gt; 0) &amp;&amp; (de_duped_image_candidates[winner - 1]-&gt;Density() == winning_density))
    --winner;

  return *de_duped_image_candidates[winner];
}</code></pre>
        <pre class=cpp><code translate="no">// device_scale_factor = DPR
static unsigned SelectionLogic(Vector&lt;ImageCandidate*&gt;&amp; image_candidates, float device_scale_factor) {
  unsigned i = 0;

  for (; i &lt; image_candidates.size() - 1; ++i) {
    unsigned next = i + 1;
    float next_density;
    float current_density;
    float geometric_mean;

    next_density = image_candidates[next]-&gt;Density();

    // next の密度が DSF より小さいならまだ先をみる必要
    if (next_density &lt; device_scale_factor) {
      continue;
    }

    // next の密度が DSF より大きい、つまり表示に十分だとわかった
    // そこで curr とのどっちを表示するかを考える
    current_density = image_candidates[i]-&gt;Density();

    // そのために幾何平均をまず取る
    geometric_mean  = sqrt(current_density * next_density);

    // curr が DPR より低くても、 DPR が 1 なら next を使う
    // もしくは
    // Geo が DSF より小さいなら next
    // (そうでないなら curr)
    if (((current_density &lt; device_scale_factor) &amp;&amp; (device_scale_factor &lt;= 1.0)) || (geometric_mean &lt;= device_scale_factor)) {
      return next;
    }
    break;
  }
  return i;
}</code></pre>
      </section>
    </section>
  </article>
</main>
<hr>
<footer>
  <p class=copyright><small>Copyright &copy; 2016 <a href=/>Jxck</a>. All Rights Reserved.</small> See <small><a href=/policies/site.html>Site Policy</a> and <a href=/policies/privacy.html>Privacy Policy</a>.</small></p>
  <amp-ad width=100vw height=320 type=adsense data-ad-client=ca-pub-2902784829138215 data-ad-slot=9735419796 data-auto-format=rspv data-full-width><div overflow></div></amp-ad>
</footer>
</body>
</html>
<amp-analytics type=googleanalytics id=analytics1>
<script type="application/json">
{
  "vars": {
    "account": "UA-15088753-7"
  },
  "triggers": {
    "trackPageview": {
      "on": "visible",
      "request": "pageview"
    }
  }
}
</script>
</amp-analytics>