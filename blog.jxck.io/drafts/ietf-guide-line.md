# IETF について知っておきたいこと

## intro

IETF が何なのか、何が行われているのか。

オープンな議論が行われている一方、その仕組みがある程度わかってなければ、参加することができない。

ここでは、基本用語の解説と、代表的な成果物である RFC 発行までの大まかな流れを解説する。


## IETF

Internet Engineering Task Force という組織。

<http://www.ietf.org/>


ざっくり言うと、

- みんなが使っている技術を
- みんなが使いやすいように
- みんなで議論して
- 標準を決めよう

ということをやっている。

具体的には RFC というドキュメントを発行している。

例えば HTTP や WebSocket プロトコルもここで決められている。

IETF で扱う対象はインターネットに関わる技術が基本だ。

いわゆる、「Wire(物理層) より上」を全般的に扱っている。


## Area (エリア)

「Wire より上」だと、あまりにも範囲が多岐に渡る。

そこで、対象分野をいくつかに分類する。

例えば Application なら App, セキュリティなら Sec などだ。

<https://www.ietf.org/iesg/area.html>

各 Area には、エリアディレクターがおり、ハンドリングを行う。


## WG (ワーキンググループ)

Area の中でも、問題を分野ごとにわけて議論するため、ワーキンググループという単位に分けている。

このグループは、目的に応じて発足され、その役目を終えたら解散する。

<https://datatracker.ietf.org/wg/>

例えば、 HTTP は httpbis 、 WebRTC は rtcweb という WG で話し合われている。


各 WG には、Chair (チェア) がおり、ハンドリングを行う。

ML や Meeting の調整役で、仕様策定における絶対的な権利があったりというわけではない。


## Draft

ドラフトは仕様書の元になる提案書のこと。
ここでは WebSocket を例に流れと種類を説明する。


### Internet Draft

ドラフトは、最初 Internet Draft というものが提出され、そこから議論が始まる。
通称 I-D と呼ばれるものであり、だれでも自由に投稿できる。
個人で出したものは、後述の WG ドラフトと分けるために個人ドラフトと言うこともある。(気がする、多分非公式)


I-D のファイル名は出した人の名前(愛称でも可)とバージョン番号がつけられる。(決まりか慣習かはしらない)


WebSocket の場合は Ian Hickson (愛称 hixie)が提出したので初版は以下。


http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-00



これは「誰でも出せる」。フォーマットと提出方法が分かれば、出すのは自由だ。エイプリルフールにネタドラフトを出す人もいるくらい自由だ。
よって、出したところで誰も同意しない可能性もある。その場合はそのまま誰にも気にされずアーカイブへと消えていくだけだ。出したら必ず採用されるほど甘い場所じゃない。



### WG ドラフト

同じ I-D だが、 WG が出す場合はこう呼ばれる場合もある。
もし、個人ドラフトに価値があり、「これはワーキンググループが総力を上げて議論するべきだ」となれば、その個人ドラフトだったものが、 WG ドラフトとなる場合もある。
名前にも WG 名が入り、個人の提案から 「WG の提案」といった扱いになる。


WebSocket は hixie-76 まで改版された次に、 Hybi の WG ドラフトになり、名前が以下になった。


http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-00


### RFC

I-D の議論が進んで、これが業界全体に有効なものだとみなされると、 RFC にするように申請し、承認されると RFC 番号がふられう。(これが 「RFC になる」ということ)
WebSocket の場合はさらに WG ドラフトになったあと、議論に参加する人が更に増えて、改版が進んみ hybi-17 までいったところで RFC になった。


RFC = Request for Comment

「コメント求む」という名前とはうらはらに、これがほとんど最終形態ということになる。つまり、最初から言ってる「仕様策定」の「仕様」とは、多くの場合この RFC を公開することを指している。
(なんでこんな名前なのかにはちゃんと意味があるらしい、 [http://rfc-jp.nic.ad.jp/what_is_ietf/ietf_section2.html:title]_ こちらを参照。)


RFC にも種類がある。

- Informational RFC
- Standard Track RFC
- Experimental RFC
- Historical RFC

各々用途があるが、上二つだけ知っておけばとりあえず良い。
２つ目の Standard が、一番良く見る RFC で、 TCP とか HTTP とか WebSocket はみなこれだ。
最初の Informational は「標準化トラックとは別に、デファクトを確立するために、仕様を RFC にしたい」といった場合に使われるようだ。
現実には、 Standard より少ない分量、短い期間で RFC へのこぎつける感じになる。


WebSocket は RFC6455

http://tools.ietf.org/html/rfc6455


これで、この仕様は IETF が責任をもって管理することになる。こうなれば、仕様がひっくり返って後方互換を失うようなことはおこらないはず。
(仕様が変わらないことが保証されているわけではない、よっぽど変なことはおこらないという意味)


大企業などが扱うシステムでは、 RFC が出ていないドラフトの段階では、その仕様が今後どうひっくり返るかわからないので、こうして RFC まで出ていることが、要件として提示されることがある。
RFC が出るというのはそういうことだ。


ざっと説明したが RFC が出るまでにかかる時間は、仕様の立ち位置と、ステークホルダの数に比例するだろう。大体は時間がかかる(少なくとも 1 年とか)。


WebSocket は hixi-00 から RFC6455 まで 3 年ほどかかってる。

RFC を作りにあたり、使う用語や策定プロセスの進め方など、そうしたメタな決まりも全て RFC になっている。

- TODO: ABNF リンク
- TODO: SHOULD, MUST リンク
- TODO: プロセス系 リンク
- TODO: informational と experimental の解説をもう少し
- TODO: BCP の説明


## 議論の参加、進め方

### Rough Consensus

IETF では、何もかもをがっちり決めた上で RFC を出すというわけではなく、「大筋はこういう感じ」というようなラフな仕様を作る。
これは、あまり細かいところまで決めつけてしまうと、実装者に工夫の余地がなくなり、発展を阻害するから。
また、細かくガッチリ決めるといっても、実際に作って運用してみないとわからないことも多い。


### Running Code

逆に、ラフな仕様でもみんながそれを元に作って (Running Code) 、それが相互に繋がる (Connectivity) なら、仕様がキチンと機能していることがわかる。
例えば、 HTTP の仕様をラフに決めて、サーバとクライアントが色々実装されて、それが相互にやり取りして Web が成り立ってれば、それで問題ない。


逆に、 IETF ではこの Connectivity を保った Running Code の存在が非常に重視される。というか Running Code が無いと通らない。


例えば、今議論されている HTTP2.0 の議論で、最初のドラフトのベースに SPDY が使われたのも、 Google に実装があり、 Google のサービスと Google Chrome の間で実際に動いている実績があることが大きかったことも関係している。


### 参加方法

IETF の議論に参加したい場合は、先に述べた WG に参加すればいい。ここでいう参加は、 WG の ML(メーリングリスト) に自分のアドレスを登録することと同義(たぶん)。
なので、参加自体はそんなに大層なことではない。


そして、 WG の議論のメインになるのは、同じく ML である。
ドラフトの提出もここでアナウンスされるし、そのドラフトについて疑問/質問や反対/賛成意見を出すためには、 ML に発言すれば良い。


この ML も誰でも参加できる。だれでも発言できる。参加しなくてもログを(これは登録してなくても)見ることができる。


次に、これは全ての WG ではないかもしれないけど、 XMPP(Jabber) が用意されていて、そこでも議論ができる。もちろん、ログが残っていて(これも登録なしに)見ることができる。


最後に、ミーティングだ。
これは、 IETF が主催するミーティングで、毎年 3, 7, 11 月の年三回行われる。会場は固定されておらず、オリンピックの用に開催ごとに違う。これが世界中で行われるのは、世界中に参加者がいるから、あえてそうしてるんだと思う。


会場の収容人数の関係上、参加には登録が必要だし、埋まれば出られない可能性もあるが、基本的にはこれもだれでも参加できる。


自分は行ったことは無いのだけれど、現地では WG ごとに時間を区切って、そこで WG の現状や方針、ドラフト提案者のプレゼンなどがあるらしい。
事前にアジェンダで実施する内容が告知され、ミーティングの内容をオープンにするために、終了後は下記が公開される。

- ミーティングの録音
- ミーティングの議事録(minutes)
- 使われた資料など


あと、 Chair から ML に一言終了報告的なのがあがる習慣があると思う。


ミーティング参加には旅費が必要だし、一週間ほど行われるので、それを仕事にしている人の参加が基本ではある。
仕事を休んで趣味で行く類のものではないけれど、どうしても参加したいなら可能だし、参加できなくても後から内容を追うことも上記の範囲なら可能だ。


TODO:

- TAO of IETFとかオフィシャルな資料も。 http://www.ietf.org/tao-translated-ja.html
- WG の Charter と Roadmap についてとその実体?
