

## Super Cookie

Super Cookie は、最初筆者も非常に驚いた、トラッカーの執念を感じる手法だ。

まず前提として、ブラウザのどこかに情報を保存でき、それがある程度の期間永続化され、かつ自動的に取得できるようなものであれば、トラッキングに応用が効く。そこで目がつけられたのが HSTS (HTTP Strict Transport Security)だ。

HSTS は、サイトが HTTPS に対応していることをブラウザに知らせ、次からは `http://` なリンクで遷移しても自動で `https://` にアップグレードさせるものだ。つまりこれは Origin ごとに 1bit の情報を保存しているとみなすことができる。

そこで `example.com` の下に `cloak00.example.com` から `cloakff.example.com` まで 256 個のサブドメインを用意したとする。

あるユーザには `00` で HSTS を、あるユーザには `01` で HSTS を、、とユーザごとに HSTS するサブドメインを変えていけば、 256 通りに区別できるというものだ。確認は、アクセスして HTTPS になっているかどうかで簡単に調べられる。

HSTS はそもそも HTTPS by Default というゴールに向けた過渡的な技術であり、 Chrome は既に最初から HTTPS で接続する方向に移行しつつあるため、今後は意味をなさなくなるだろう。