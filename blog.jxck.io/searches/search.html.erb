<html>
  <meta charset="utf-8">
  <title>Search Result of <%= h(query[:q]) %></title>
  <h1>Search Result of <%= h(query[:q]) %></h1>
  <form action=searches method=get>
    <label for=keyword>Search Keyword</label>
    <input id=keyword type=text name=q placeholder="csp, cookie, 標準化 etc" maxlength=20 minlength=1 required>
    <button type=submit>search</button>
  </form>
  <style>
a.highlight {
  background-color: yellow;
}
  </style>
  <ul>
    <% results.each{|result| %>
      <li>
        <details open>
          <summary>
            <time datetime="<%= h(result[:date]) %>"><%= h(result[:date]) %></time>
            <a href=https://blog.jxck.io/<%= result[:url] %>><%= result[:title] %></a>
          </summary>
          <ul>
            <%- result[:details].each{|detail| %>
            <li>
              <%= h(detail[:prefix]) %>
              <a class=highlight href=https://blog.jxck.io/<%= result[:url] %>#:~:text=<%= detail[:fragment] %>>
                <%= h(detail[:keyword]) %>
              </a>
              <%= h(detail[:suffix]) %>
            </li>
            <%- } %>
          </ul>
        </details>
      </li>
    <% } %>
  </ul>
</html>
